@host = http://localhost:3000/api/v1

### Get all loans
GET {{host}}/loans
Accept: application/json

# Expected: 200 OK and a JSON array (should contain >= 10 sample loans)

### Get loans (paged & sorted)
GET {{host}}/loans?page=1&pageSize=5&sortBy=amount&sortDir=desc
Accept: application/json

# Expected: 200 OK, 5 items, sorted by amount desc

### Get loans summary (totals)
GET {{host}}/loans/summary
Accept: application/json

# Expected: 200 OK with totalAmount, totalOutstanding, totalOverdue numbers

### Get single loan (valid)
GET {{host}}/loans/LN-001
Accept: application/json

# Expected: 200 OK and an object with loanNumber = "LN-001"

### Create loan (valid)
POST {{host}}/loans
Content-Type: application/json

{
  "loanNumber": "LN-036",
  "amount": 10000000,
  "startDate": "2025-01-01",
  "endDate": "2027-01-01",
  "emi": 2000,
  "outstandingAmount": 50000,
  "overdueAmount": 0
}

# Expected: 201 Created and JSON { "success": true }

### Create loan (invalid - negative amount)
POST {{host}}/loans
Content-Type: application/json

{
  "loanNumber": "LN-012",
  "amount": -1000,
  "startDate": "2025-01-01",
  "endDate": "2027-01-01",
  "emi": 0,
  "outstandingAmount": 0,
  "overdueAmount": 0
}

# Expected: 400 Bad Request and validation errors

### Create loan (invalid - missing loanNumber & Amount)
POST {{host}}/loans
Content-Type: application/json

{
  "startDate": "2025-01-01",
  "endDate": "2026-01-01",
  "emi": 800,
  "outstandingAmount": 10000,
  "overdueAmount": 0
}

# Expected: 400 Bad Request and validation errors

### Get single loan (not found)
GET {{host}}/loans/LN-999
Accept: application/json

# Expected: 404 Not Found when loanNumber does not exist

### Get single loan (invalid format)
GET {{host}}/loans/LN-ABC
Accept: application/json

# Expected: 400 Bad Request because loanNumber must match LN-<digits>

### Update loan (valid)
PUT {{host}}/loans/LN-001
Content-Type: application/json

{
  "loanNumber": "LN-001",
  "amount": 110000,
  "startDate": "2024-01-01",
  "endDate": "2026-01-01",
  "emi": 4600,
  "outstandingAmount": 79000,
  "overdueAmount": 0
}

# Expected: 200 OK and JSON { "success": true, "message": "Loan LN-001 updated" }

### Update loan (mismatched loanNumber)
PUT {{host}}/loans/LN-001
Content-Type: application/json

{
  "loanNumber": "LN-999",
  "amount": 110000,
  "startDate": "2024-01-01",
  "endDate": "2026-01-01",
  "emi": 4600,
  "outstandingAmount": 79000,
  "overdueAmount": 0
}

# Expected: 400 Bad Request (body loanNumber must match param)

### Create loan (duplicate loanNumber)
POST {{host}}/loans
Content-Type: application/json

{
  "loanNumber": "LN-001",
  "amount": 123000,
  "startDate": "2024-03-01",
  "endDate": "2026-03-01",
  "emi": 3000,
  "outstandingAmount": 50000,
  "overdueAmount": 0
}

# Expected: 409 Conflict (duplicate active loanNumber)

### Delete loan (soft delete)
DELETE {{host}}/loans/LN-001
Accept: application/json

# Expected: 200 OK and message "Loan LN-001 deleted"

### Get deleted loan (should 404 after delete)
GET {{host}}/loans/LN-001
Accept: application/json

# Expected: 404 Not Found (soft-deleted)
